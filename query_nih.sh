#!/bin/bash

curl 'https://blast.ncbi.nlm.nih.gov/Blast.cgi' \
    -H 'Pragma: no-cache' \
    -H 'Origin: https://blast.ncbi.nlm.nih.gov' \
    -H 'Accept-Encoding: gzip, deflate, br' \
    -H 'Accept-Language: en-US,en;q=0.9' \
    -H 'Upgrade-Insecure-Requests: 1' \
    -H 'User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Ubuntu Chromium/64.0.3282.167 Chrome/64.0.3282.167 Safari/537.36' \
    -H 'Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryTn4MF9AqtZx1gUD4' \
    -H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8' \
    -H 'Cache-Control: no-cache' \
    -H 'Referer: https://blast.ncbi.nlm.nih.gov/' \
    -H 'Cookie: BlastCubbyImported=passive; MyBlastUser=1VMqfYRkBRi7eW_5NE540118F; ncbi_sid=55BAD7D0A94C4401_0000SID; starnext=K4OwNg9ghgJiCmAPALgLgEwF4BGYoGdkAyAFhz0P3igCcBjACyIEYtRJYWB2TAMyjBUi6AAyYArOIBCAQRkAxdOJkBOEgGEu6ACLMR+g4aPNhzcgWQBSAMwyAcgHk7AURszcFqrUZvHL4VgehAB0IHTYAJahYAC2oREMwQDmEABuwmRBVrZ+zsIAbOaEvk6utlle9EzoPFklLm4V1FX1eegAHEVWXOq5lj1N3gz9vaXCKpjM+fpE1mIqM9ZmU4tYCyKz1nwCQtZkyDTA8LPik+LtJtaFzMx7szzoJLOd6CqP7bMT6PniC6RiSxEXGspDMHXEGxIWBAUGQEVSxxIZHY0DgSGIJFO6CI4i2zF++RxZC4KnEOKxXExOMKG3EPFpLx+OImG2mmA2YUiAH0AA40CBJGhQGJdEBAA=' \
    -H 'Connection: keep-alive' \
    -H 'DNT: 1' \
    --data-binary $'------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="QUERY"\r\n\r\n'$1$'\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="db"\r\n\r\nnucleotide\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="QUERY_FROM"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="QUERY_TO"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="QUERYFILE"; filename=""\r\nContent-Type: application/octet-stream\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="GENETIC_CODE"\r\n\r\n1\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="JOB_TITLE"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="SUBJECTS"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="stype"\r\n\r\nnucleotide\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="SUBJECTS_FROM"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="SUBJECTS_TO"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="SUBJECTFILE"; filename=""\r\nContent-Type: application/octet-stream\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="DBTYPE"\r\n\r\ngc\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="DATABASE"\r\n\r\nnr\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="EQ_MENU"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="NUM_ORG"\r\n\r\n1\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="EQ_TEXT"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="BLAST_PROGRAMS"\r\n\r\nmegaBlast\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="PHI_PATTERN"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="MAX_NUM_SEQ"\r\n\r\n100\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="SHORT_QUERY_ADJUST"\r\n\r\non\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="EXPECT"\r\n\r\n10\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="WORD_SIZE"\r\n\r\n28\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="HSP_RANGE_MAX"\r\n\r\n0\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="MATRIX_NAME"\r\n\r\nPAM30\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="MATCH_SCORES"\r\n\r\n1,-2\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="GAPCOSTS"\r\n\r\n0 0\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="COMPOSITION_BASED_STATISTICS"\r\n\r\n0\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="FILTER"\r\n\r\nL\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="REPEATS"\r\n\r\n749232\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="FILTER"\r\n\r\nm\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="TEMPLATE_LENGTH"\r\n\r\n0\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="TEMPLATE_TYPE"\r\n\r\n0\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="PSSM"; filename=""\r\nContent-Type: application/octet-stream\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="I_THRESH"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="DI_THRESH"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="PSI_PSEUDOCOUNT"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="SHOW_OVERVIEW"\r\n\r\ntrue\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="SHOW_LINKOUT"\r\n\r\ntrue\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="GET_SEQUENCE"\r\n\r\ntrue\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="FORMAT_OBJECT"\r\n\r\nAlignment\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="FORMAT_TYPE"\r\n\r\nHTML\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="ALIGNMENT_VIEW"\r\n\r\nPairwise\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="MASK_CHAR"\r\n\r\n2\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="MASK_COLOR"\r\n\r\n1\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="DESCRIPTIONS"\r\n\r\n100\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="ALIGNMENTS"\r\n\r\n100\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="LINE_LENGTH"\r\n\r\n60\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="NEW_VIEW"\r\n\r\nfalse\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="OLD_VIEW"\r\n\r\nfalse\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="NCBI_GI"\r\n\r\nfalse\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="SHOW_CDS_FEATURE"\r\n\r\nfalse\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="NUM_OVERVIEW"\r\n\r\n100\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="FORMAT_EQ_TEXT"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="FORMAT_ORGANISM"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="EXPECT_LOW"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="EXPECT_HIGH"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="PERC_IDENT_LOW"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="PERC_IDENT_HIGH"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="QUERY_INDEX"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="FORMAT_NUM_ORG"\r\n\r\n1\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="CONFIG_DESCR"\r\n\r\n2,3,4,5,6,7,8\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="CLIENT"\r\n\r\nweb\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="SERVICE"\r\n\r\nplain\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="CMD"\r\n\r\nrequest\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="PAGE"\r\n\r\nMegaBlast\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="PROGRAM"\r\n\r\nblastn\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="MEGABLAST"\r\n\r\non\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="RUN_PSIBLAST"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="WWW_BLAST_TYPE"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="TWO_HITS"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="DEFAULT_PROG"\r\n\r\nmegaBlast\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="DB_DISPLAY_NAME"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="ORG_DBS"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="SHOW_ORGANISMS"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="DBTAXID"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="SAVED_PSSM"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="SELECTED_PROG_TYPE"\r\n\r\nmegaBlast\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="SAVED_SEARCH"\r\n\r\ntrue\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="BLAST_SPEC"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="MIXED_DATABASE"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="QUERY_BELIEVE_DEFLINE"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="DB_DIR_PREFIX"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="USER_DATABASE"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="USER_WORD_SIZE"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="USER_MATCH_SCORES"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="USER_FORMAT_DEFAULTS"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="NO_COMMON"\r\n\r\n\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="NUM_DIFFS"\r\n\r\n0\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="NUM_OPTS_DIFFS"\r\n\r\n0\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="UNIQ_DEFAULTS_NAME"\r\n\r\nA_SearchDefaults_1eqV9j_3fP9_dqtUq7bEJqG_GTWlT_27Vx96\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="PAGE_TYPE"\r\n\r\nBlastSearch\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="USER_DEFAULT_PROG_TYPE"\r\n\r\nmegaBlast\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4\r\nContent-Disposition: form-data; name="USER_DEFAULT_MATCH_SCORES"\r\n\r\n0\r\n------WebKitFormBoundaryTn4MF9AqtZx1gUD4--\r\n' \
    --compressed \
    2>/dev/null \
    | grep 'Request ID' | sed 's/.*<b>\(.*\)<\/b>.*/\1/'

